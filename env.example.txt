# =============================================================================
# WebGPT Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
NODE_ENV=development
APP_NAME=WebGPT
APP_URL=http://localhost:3000
API_URL=http://localhost:4000
WIDGET_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# Database (PostgreSQL with pgvector)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://webgpt:webgpt_dev_password@localhost:5432/webgpt?schema=public
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# -----------------------------------------------------------------------------
# Redis (Cache + BullMQ)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
# JWT secret for API authentication (generate with: openssl rand -base64 32)
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d

# NextAuth configuration for admin portal
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-nextauth-secret-change-in-production

# -----------------------------------------------------------------------------
# OpenAI API
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_ORG_ID=
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_CHAT_MODEL=gpt-4o-mini
OPENAI_MAX_RETRIES=3
OPENAI_TIMEOUT_MS=60000

# -----------------------------------------------------------------------------
# Crawling Configuration
# -----------------------------------------------------------------------------
CRAWLER_DEFAULT_CONCURRENCY=5
CRAWLER_DEFAULT_DELAY_MS=100
CRAWLER_MAX_PAGES_DEFAULT=1000
CRAWLER_MAX_DEPTH_DEFAULT=10
CRAWLER_USER_AGENT=WebGPT Bot/1.0 (+https://webgpt.dev)

# -----------------------------------------------------------------------------
# Chunking Configuration
# -----------------------------------------------------------------------------
CHUNK_SIZE_TARGET=800
CHUNK_SIZE_MIN=200
CHUNK_SIZE_MAX=1000
CHUNK_OVERLAP=100

# -----------------------------------------------------------------------------
# Retrieval Configuration
# -----------------------------------------------------------------------------
RETRIEVAL_TOP_K=12
RETRIEVAL_VECTOR_WEIGHT=0.7
RETRIEVAL_FTS_WEIGHT=0.3
RETRIEVAL_MIN_SCORE=0.3

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_WIDGET_RPM=60
RATE_LIMIT_WIDGET_BURST=10
RATE_LIMIT_API_RPM=1000
RATE_LIMIT_API_BURST=100

# -----------------------------------------------------------------------------
# Observability
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json

# OpenTelemetry
OTEL_ENABLED=false
OTEL_SERVICE_NAME=webgpt
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# -----------------------------------------------------------------------------
# Seed Data (for initial setup)
# -----------------------------------------------------------------------------
SEED_OWNER_EMAIL=admin@webgpt.dev
SEED_OWNER_PASSWORD=changeme123!
SEED_WORKSPACE_NAME=Default Workspace

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ADMIN_ORIGINS=http://localhost:3000
CORS_WIDGET_VALIDATE_ORIGIN=true

# -----------------------------------------------------------------------------
# Public API URL (for admin frontend)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_API_URL=http://localhost:4000/api/v1



